<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>既存のプロジェクトのエディションを移行する - The Edition Guide</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../theme/em-to-bold.css">
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">序文</a></li><li class="chapter-item expanded "><a href="../editions/index.html"><strong aria-hidden="true">1.</strong> エディションとは？</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../editions/creating-a-new-project.html"><strong aria-hidden="true">1.1.</strong> 新しいプロジェクトを作成する</a></li><li class="chapter-item expanded "><a href="../editions/transitioning-an-existing-project-to-a-new-edition.html" class="active"><strong aria-hidden="true">1.2.</strong> 既存のプロジェクトのエディションを移行する</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2015/index.html"><strong aria-hidden="true">2.</strong> Rust 2015</a></li><li class="chapter-item expanded "><a href="../rust-2018/index.html"><strong aria-hidden="true">3.</strong> Rust 2018</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/edition-changes.html"><strong aria-hidden="true">3.1.</strong> 2018-Specific Changes</a></li><li class="chapter-item expanded "><a href="../rust-2018/module-system/index.html"><strong aria-hidden="true">3.2.</strong> Module system</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/module-system/raw-identifiers.html"><strong aria-hidden="true">3.2.1.</strong> Raw identifiers</a></li><li class="chapter-item expanded "><a href="../rust-2018/module-system/path-clarity.html"><strong aria-hidden="true">3.2.2.</strong> Path clarity</a></li><li class="chapter-item expanded "><a href="../rust-2018/module-system/more-visibility-modifiers.html"><strong aria-hidden="true">3.2.3.</strong> More visibility modifiers</a></li><li class="chapter-item expanded "><a href="../rust-2018/module-system/nested-imports-with-use.html"><strong aria-hidden="true">3.2.4.</strong> Nested imports with use</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/error-handling-and-panics/index.html"><strong aria-hidden="true">3.3.</strong> Error handling and panics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/error-handling-and-panics/the-question-mark-operator-for-easier-error-handling.html"><strong aria-hidden="true">3.3.1.</strong> The ? operator for easier error handling</a></li><li class="chapter-item expanded "><a href="../rust-2018/error-handling-and-panics/question-mark-in-main-and-tests.html"><strong aria-hidden="true">3.3.2.</strong> ? in main and tests</a></li><li class="chapter-item expanded "><a href="../rust-2018/error-handling-and-panics/controlling-panics-with-std-panic.html"><strong aria-hidden="true">3.3.3.</strong> Controlling panics with std::panic</a></li><li class="chapter-item expanded "><a href="../rust-2018/error-handling-and-panics/aborting-on-panic.html"><strong aria-hidden="true">3.3.4.</strong> Aborting on panic</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/control-flow/index.html"><strong aria-hidden="true">3.4.</strong> Control flow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/control-flow/loops-can-break-with-a-value.html"><strong aria-hidden="true">3.4.1.</strong> Loops can break with a value</a></li><li class="chapter-item expanded "><a href="../rust-2018/control-flow/async-await-for-easier-concurrency.html"><strong aria-hidden="true">3.4.2.</strong> async/await for easier concurrency</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/trait-system/index.html"><strong aria-hidden="true">3.5.</strong> Trait system</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/trait-system/impl-trait-for-returning-complex-types-with-ease.html"><strong aria-hidden="true">3.5.1.</strong> impl Trait for returning complex types with ease</a></li><li class="chapter-item expanded "><a href="../rust-2018/trait-system/dyn-trait-for-trait-objects.html"><strong aria-hidden="true">3.5.2.</strong> dyn Trait for trait objects</a></li><li class="chapter-item expanded "><a href="../rust-2018/trait-system/more-container-types-support-trait-objects.html"><strong aria-hidden="true">3.5.3.</strong> More container types support trait objects</a></li><li class="chapter-item expanded "><a href="../rust-2018/trait-system/associated-constants.html"><strong aria-hidden="true">3.5.4.</strong> Associated constants</a></li><li class="chapter-item expanded "><a href="../rust-2018/trait-system/no-anon-params.html"><strong aria-hidden="true">3.5.5.</strong> No more anonymous parameters</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/slice-patterns.html"><strong aria-hidden="true">3.6.</strong> Slice patterns</a></li><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/index.html"><strong aria-hidden="true">3.7.</strong> Ownership and lifetimes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/non-lexical-lifetimes.html"><strong aria-hidden="true">3.7.1.</strong> Non-lexical lifetimes</a></li><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/default-match-bindings.html"><strong aria-hidden="true">3.7.2.</strong> Default match bindings</a></li><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/the-anonymous-lifetime.html"><strong aria-hidden="true">3.7.3.</strong> '_, the anonymous lifetime</a></li><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/lifetime-elision-in-impl.html"><strong aria-hidden="true">3.7.4.</strong> Lifetime elision in impl</a></li><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/inference-in-structs.html"><strong aria-hidden="true">3.7.5.</strong> T: 'a inference in structs</a></li><li class="chapter-item expanded "><a href="../rust-2018/ownership-and-lifetimes/simpler-lifetimes-in-static-and-const.html"><strong aria-hidden="true">3.7.6.</strong> Simpler lifetimes in static and const</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/data-types/index.html"><strong aria-hidden="true">3.8.</strong> Data types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/data-types/field-init-shorthand.html"><strong aria-hidden="true">3.8.1.</strong> Field init shorthand</a></li><li class="chapter-item expanded "><a href="../rust-2018/data-types/inclusive-ranges.html"><strong aria-hidden="true">3.8.2.</strong> ..= for inclusive ranges</a></li><li class="chapter-item expanded "><a href="../rust-2018/data-types/128-bit-integers.html"><strong aria-hidden="true">3.8.3.</strong> 128 bit integers</a></li><li class="chapter-item expanded "><a href="../rust-2018/data-types/operator-equals-are-now-implementable.html"><strong aria-hidden="true">3.8.4.</strong> &quot;Operator-equals&quot; are now implementable</a></li><li class="chapter-item expanded "><a href="../rust-2018/data-types/union-for-an-unsafe-form-of-enum.html"><strong aria-hidden="true">3.8.5.</strong> union for an unsafe form of enum</a></li><li class="chapter-item expanded "><a href="../rust-2018/data-types/choosing-alignment-with-the-repr-attribute.html"><strong aria-hidden="true">3.8.6.</strong> Choosing alignment with the repr attribute</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/simd-for-faster-computing.html"><strong aria-hidden="true">3.9.</strong> SIMD for faster computing</a></li><li class="chapter-item expanded "><a href="../rust-2018/macros/index.html"><strong aria-hidden="true">3.10.</strong> Macros</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/macros/custom-derive.html"><strong aria-hidden="true">3.10.1.</strong> Custom Derive</a></li><li class="chapter-item expanded "><a href="../rust-2018/macros/macro-changes.html"><strong aria-hidden="true">3.10.2.</strong> Macro changes</a></li><li class="chapter-item expanded "><a href="../rust-2018/macros/at-most-once.html"><strong aria-hidden="true">3.10.3.</strong> At most one repetition</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/the-compiler/index.html"><strong aria-hidden="true">3.11.</strong> The compiler</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/the-compiler/improved-error-messages.html"><strong aria-hidden="true">3.11.1.</strong> Improved error messages</a></li><li class="chapter-item expanded "><a href="../rust-2018/the-compiler/incremental-compilation-for-faster-compiles.html"><strong aria-hidden="true">3.11.2.</strong> Incremental Compilation for faster compiles</a></li><li class="chapter-item expanded "><a href="../rust-2018/the-compiler/an-attribute-for-deprecation.html"><strong aria-hidden="true">3.11.3.</strong> An attribute for deprecation</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/rustup-for-managing-rust-versions.html"><strong aria-hidden="true">3.12.</strong> Rustup for managing Rust versions</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/index.html"><strong aria-hidden="true">3.13.</strong> Cargo and crates.io</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/cargo-check-for-faster-checking.html"><strong aria-hidden="true">3.13.1.</strong> cargo check for faster checking</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/cargo-install-for-easy-installation-of-tools.html"><strong aria-hidden="true">3.13.2.</strong> cargo install for easy installation of tools</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/cargo-new-defaults-to-a-binary-project.html"><strong aria-hidden="true">3.13.3.</strong> cargo new defaults to a binary project</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/cargo-rustc-for-passing-arbitrary-flags-to-rustc.html"><strong aria-hidden="true">3.13.4.</strong> cargo rustc for passing arbitrary flags to rustc</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/cargo-workspaces-for-multi-package-projects.html"><strong aria-hidden="true">3.13.5.</strong> Cargo workspaces for multi-package projects</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/multi-file-examples.html"><strong aria-hidden="true">3.13.6.</strong> Multi-file examples</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/replacing-dependencies-with-patch.html"><strong aria-hidden="true">3.13.7.</strong> Replacing dependencies with patch</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/cargo-can-use-a-local-registry-replacement.html"><strong aria-hidden="true">3.13.8.</strong> Cargo can use a local registry replacement</a></li><li class="chapter-item expanded "><a href="../rust-2018/cargo-and-crates-io/crates-io-disallows-wildcard-dependencies.html"><strong aria-hidden="true">3.13.9.</strong> Crates.io disallows wildcard dependencies</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/documentation/index.html"><strong aria-hidden="true">3.14.</strong> Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/documentation/new-editions-of-the-book.html"><strong aria-hidden="true">3.14.1.</strong> New editions of the &quot;the book&quot;</a></li><li class="chapter-item expanded "><a href="../rust-2018/documentation/the-rust-bookshelf.html"><strong aria-hidden="true">3.14.2.</strong> The Rust Bookshelf</a></li><li class="chapter-item expanded "><a href="../rust-2018/documentation/the-rustonomicon.html"><strong aria-hidden="true">3.14.3.</strong> The Rustonomicon</a></li><li class="chapter-item expanded "><a href="../rust-2018/documentation/std-os-has-documentation-for-all-platforms.html"><strong aria-hidden="true">3.14.4.</strong> Full documentation for std::os</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/rustdoc/index.html"><strong aria-hidden="true">3.15.</strong> rustdoc</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/rustdoc/documentation-tests-can-now-compile-fail.html"><strong aria-hidden="true">3.15.1.</strong> Documentation tests can now compile-fail</a></li><li class="chapter-item expanded "><a href="../rust-2018/rustdoc/rustdoc-uses-commonmark.html"><strong aria-hidden="true">3.15.2.</strong> Rustdoc uses CommonMark</a></li></ol></li><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/index.html"><strong aria-hidden="true">3.16.</strong> Platform and target support</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/libcore-for-low-level-rust.html"><strong aria-hidden="true">3.16.1.</strong> libcore for low-level Rust</a></li><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/webassembly-support.html"><strong aria-hidden="true">3.16.2.</strong> WebAssembly support</a></li><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/global-allocators.html"><strong aria-hidden="true">3.16.3.</strong> Global allocators</a></li><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/msvc-toolchain-support.html"><strong aria-hidden="true">3.16.4.</strong> MSVC toolchain support</a></li><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/musl-support-for-fully-static-binaries.html"><strong aria-hidden="true">3.16.5.</strong> MUSL support for fully static binaries</a></li><li class="chapter-item expanded "><a href="../rust-2018/platform-and-target-support/cdylib-crates-for-c-interoperability.html"><strong aria-hidden="true">3.16.6.</strong> cdylib crates for C interoperability</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../rust-next/index.html"><strong aria-hidden="true">4.</strong> 次のエディション</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../rust-next/edition-changes.html"><strong aria-hidden="true">4.1.</strong> 次のエディションに特有の変更</a></li><li class="chapter-item expanded "><a href="../rust-next/dbg-macro.html"><strong aria-hidden="true">4.2.</strong> dbg! マクロ</a></li><li class="chapter-item expanded "><a href="../rust-next/no-jemalloc.html"><strong aria-hidden="true">4.3.</strong> デフォルトでjemallocを使わない</a></li><li class="chapter-item expanded "><a href="../rust-next/uniform-paths.html"><strong aria-hidden="true">4.4.</strong> 統一的なパス</a></li><li class="chapter-item expanded "><a href="../rust-next/literal-macro-matcher.html"><strong aria-hidden="true">4.5.</strong> リテラルマクロマッチャ</a></li><li class="chapter-item expanded "><a href="../rust-next/qustion-mark-operator-in-macros.html"><strong aria-hidden="true">4.6.</strong> マクロ内の?演算子</a></li><li class="chapter-item expanded "><a href="../rust-next/const-fn.html"><strong aria-hidden="true">4.7.</strong> const fn</a></li><li class="chapter-item expanded "><a href="../rust-next/pin.html"><strong aria-hidden="true">4.8.</strong> ピン留め</a></li><li class="chapter-item expanded "><a href="../rust-next/no-more-fnbox.html"><strong aria-hidden="true">4.9.</strong> FnBoxは不要に</a></li><li class="chapter-item expanded "><a href="../rust-next/alternative-cargo-registries.html"><strong aria-hidden="true">4.10.</strong> Cargoレジストリが選択できるように</a></li><li class="chapter-item expanded "><a href="../rust-next/tryfrom-and-tryinto.html"><strong aria-hidden="true">4.11.</strong> TryFromとTryInto</a></li><li class="chapter-item expanded "><a href="../rust-next/future.html"><strong aria-hidden="true">4.12.</strong> Futureトレイト</a></li><li class="chapter-item expanded "><a href="../rust-next/alloc.html"><strong aria-hidden="true">4.13.</strong> allocクレート</a></li><li class="chapter-item expanded "><a href="../rust-next/maybe-uninit.html"><strong aria-hidden="true">4.14.</strong> MaybeUninit</a></li><li class="chapter-item expanded "><a href="../rust-next/cargo-vendor.html"><strong aria-hidden="true">4.15.</strong> cargo vendor</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">The Edition Guide</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!--
# Transitioning an existing project to a new edition
-->
<h1><a class="header" href="#既存のプロジェクトのエディションを移行する" id="既存のプロジェクトのエディションを移行する">既存のプロジェクトのエディションを移行する</a></h1>
<!--
New editions might change the way you write Rust – they add new syntax,
language, and library features, and also remove features. For example, `try`,
`async`, and `await` are keywords in Rust 2018, but not Rust 2015. If you
have a project that's using Rust 2015, and you'd like to use Rust 2018 for it
instead, there's a few steps that you need to take.
-->
<p>新たなエディションによってRustの書き方が変わるかも知れません。
新しい構文や新たなライブラリ機能の追加、そして時に機能の削除もあります。
例えば、<code>try</code>、<code>async</code>、<code>await</code>は Rust 2018ではキーワードですが、Rust 2015ではそうではありません。
もしあなたが Rust 2015のプロジェクトを持っていて、それを Rust 2018に移行したい場合には、やらなければならないことが幾つかあります。</p>
<!--
> It's our intention that the migration to new editions is as smooth an
> experience as possible. If it's difficult for you to upgrade to Rust 2018,
> we consider that a bug. If you run into problems with this process, please
> [file a bug](https://github.com/rust-lang/rust/issues/new). Thank you!
-->
<blockquote>
<p>我々は、新しいエディションへの移行をできるだけスムーズに行えるようにしたいと考えています。
もし、Rust 2018へアップグレードするのが大変な場合は、我々はそれをバグとみなします。
もし移行時に問題があった場合には<a href="https://github.com/rust-lang/rust/issues/new">バグ登録</a>してください。</p>
<p>訳注：Rustの日本語コミュニティもあります。
Slackを使用しており<a href="https://rust-jp.herokuapp.com/">こちら</a>から登録できます。</p>
</blockquote>
<!--
Here's an example. Imagine we have a crate that has this code in
`src/lib.rs`:
-->
<p>ここに例を挙げます。<code>src/lib.rs</code>に以下のコードがあるクレートがあるとします。</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Foo {
    fn foo(&amp;self, Box&lt;Foo&gt;);
}
<span class="boring">}
</span></code></pre></pre>
<!--
This code uses an anonymous parameter, that `Box<Foo>`. This is [not
supported in Rust 2018](../rust-2018/trait-system/no-anon-params.md), and
so this would fail to compile. Let's get this code up to date!
-->
<p>このコードは <code>Box&lt;Foo&gt;</code>という無名パラメータを使用しています。
これは <a href="../rust-2018/trait-system/no-anon-params.html">Rust 2018ではサポートされておらず</a>、コンパイルに失敗します。
このコードを更新してみましょう。</p>
<!--
## Updating your code to be compatible with the new edition
-->
<h2><a class="header" href="#あなたのコードを新しいエディションでコンパイルできるようにする" id="あなたのコードを新しいエディションでコンパイルできるようにする">あなたのコードを新しいエディションでコンパイルできるようにする</a></h2>
<!--
Your code may or may not use features that are incompatible with the new
edition. In order to help transition to Rust 2018, we've included a new
subcommand with Cargo. To start, let's run it:
-->
<p>あなたのコードは互換性のない機能を使っているかも知れないし、使っていないかも知れません。
Rust 2018への移行を助けるためにCargoに新しいサブコマンドを追加しました。
まず初めにそれを起動してみましょう。</p>
<pre><code class="language-console">&gt; cargo fix --edition
</code></pre>
<!--
This will check your code, and automatically fix any issues that it can.
Let's look at `src/lib.rs` again:
-->
<p>これはあなたのコードをチェックして、自動的に移行の問題を修正してくれます。
もう一度 <code>src/lib.rs</code>を見てみましょう。</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Foo {
    fn foo(&amp;self, _: Box&lt;Foo&gt;);
}
<span class="boring">}
</span></code></pre></pre>
<!--
It's re-written our code to introduce a parameter name for that trait object.
In this case, since it had no name, `cargo fix` will replace it with `_`,
which is conventional for unused variables.
-->
<p>トレイトオブジェクトのためのパラメータ名が追加された形でコードが書き換えられています。
この場合は、パラメータ名がなかったので、使用されていないパラメータの慣習に従って <code>_</code> を付加しています。</p>
<!--
`cargo fix` can't always fix your code automatically.
If `cargo fix` can't fix something, it will print the warning that it cannot fix
to the console. If you see one of these warnings, you'll have to update your code
manually. See the corresponding section of this guide for help, and if you have
problems, please seek help at the [user's forums](https://users.rust-lang.org/).
-->
<p><code>Cargo fix</code>は常に自動的にコードを修正してくれるわけではありません。
もし、<code>cargo fix</code>がコードを修正できない時にはコンソールに修正できなかったという警告を表示します。
その場合は手動でコードを修正してください。
助けが必要な時は、このガイドの対応するセクションを参照してください。
問題がある場合は、 <a href="https://users.rust-lang.org/">ユーザーフォーラム</a>で助けを求めてください。</p>
<!--
Keep running `cargo fix --edition` until you have no more warnings.
-->
<p>そして警告が出なくなるまで <code>cargo fix --edition</code> を繰り返し実行してください。</p>
<!--
Congrats! Your code is now valid in both Rust 2015 and Rust 2018!
-->
<p>おめでとうございます！ あなたのコードはRust 2015とRust 2018の双方で正しいコードになりました。</p>
<!--
## Enabling the new edition to use new features
-->
<h2><a class="header" href="#新機能を使うために新たなエディションを有効化する" id="新機能を使うために新たなエディションを有効化する">新機能を使うために新たなエディションを有効化する</a></h2>
<!--
In order to use some new features, you must explicitly opt in to the new
edition. Once you're ready to commit, change your `Cargo.toml` to add the new
`edition` key/value pair. For example:
-->
<p>新しいエディションの新機能を使うには明示的にオプトインする必要があります。
コミットする準備ができたら、<code>Cargo.toml</code>に新しいエディションのキーバリューペアを追加してください。
例えば以下のような形になります。</p>
<pre><code class="language-toml">[package]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
edition = &quot;2018&quot;
</code></pre>
<!--
If there's no `edition` key, Cargo will default to Rust 2015. But in this case,
we've chosen `2018`, and so our code is compiling with Rust 2018!
-->
<p>もし <code>edition</code>キーがなければCargoはデフォルトで Rust 2015をエディションとして使います。
しかし上記の例では、<code>2018</code>を明示的に指定しているのでコードは Rust 2018でビルドされます。</p>
<!--
## Writing idiomatic code in a new edition
-->
<h2><a class="header" href="#新しいエディションで慣用的なコードを書く" id="新しいエディションで慣用的なコードを書く">新しいエディションで慣用的なコードを書く</a></h2>
<!--
Editions are not only about new features and removing old ones. In any programming
language, idioms change over time, and Rust is no exception. While old code
will continue to compile, it might be written with different idioms today.
-->
<p>エディションは新機能を追加したり機能を削除するだけのものではありません。
どのようなプログラミング言語でも、イディオム（プログラムの書き方のスタイル）は時と共に変化していきます。
Rustも例外ではありません。
古いスタイルのコードは引き続きコンパイル可能ですが、新しいエディションでは違った書き方で書いた方が良いかも知れません。</p>
<!--
Our sample code contains an outdated idiom. Here it is again:
-->
<p>我々のサンプルコードは古いスタイルを含んでいます。
もう一度ここにそのコードを示します。</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Foo {
    fn foo(&amp;self, _: Box&lt;Foo&gt;);
}
<span class="boring">}
</span></code></pre></pre>
<!--
In Rust 2018, it's considered idiomatic to use the [`dyn`
keyword](../rust-2018/trait-system/dyn-trait-for-trait-objects.md) for
trait objects.
-->
<p>Rust 2018では、トレイトオブジェクトに <a href="../rust-2018/trait-system/dyn-trait-for-trait-objects.html"><code>dyn</code> キーワード</a> を付けるのが良いとされています。</p>
<!--
Eventually, we want `cargo fix` to fix all these idioms automatically in the same
manner we did for upgrading to the 2018 edition. **Currently,
though, the *"idiom lints"* are not ready for widespread automatic fixing.** The
compiler isn't making `cargo fix`-compatible suggestions in many cases right
now, and it is making incorrect suggestions in others. Enabling the idiom lints,
even with `cargo fix`, is likely to leave your crate either broken or with many
warnings still remaining.
-->
<p>いずれ、<code>cargo fix</code>によってこのようなイディオムの変更も、2018エディションへアップグレードしたときのように自動的に行いたいと考えています。
<strong>ただし今現在は、イディオムチェッカーが広範囲の自動修正をできるレベルにはなっていません。</strong>
今のところ、コンパイラは多くの場合 <code>cargo fix</code>互換のサジェスチョンを出さなかったり、間違ったサジェスチョンを出したりします。
<code>cargo fix</code>と共にイディオムチェッカーを有効にすると、おそらくはあなたのコードを壊してしまったり、多くの警告が残り続けるということになってしまいます。</p>
<!--
We have plans to make these idiom migrations a seamless part of the Rust 2018
experience, but we're not there yet. As a result the following instructions are
recommended only for the intrepid who are willing to work through a few
compiler/Cargo bugs!
-->
<p>Rust 2018の体験の一部として、シームレスなイディオム移行を提供する計画があります。
しかしまだそこには至っていません。
したがって、以下の手順はコンパイラやCargoのバグを乗り越えることを厭わない勇猛な方のみにお勧めします。</p>
<!--
With that out of the way, we can instruct Cargo to fix our code snippet with:
-->
<p>以上を踏まえたうえで、私たちのコード片をCargoに修正させてみましょう。</p>
<pre><code class="language-console">$ cargo fix --edition-idioms
</code></pre>
<!--
Afterwards, `src/lib.rs` looks like this:
-->
<p>実行後は <code>src/lib.rs</code>は以下のようになります。</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Foo {
    fn foo(&amp;self, _: Box&lt;dyn Foo&gt;);
}
<span class="boring">}
</span></code></pre></pre>
<!--
We're now more idiomatic, and we didn't have to fix our code manually!
-->
<p>これでコードはより新しいスタイルになりました。
手修正する必要はありませんでした。</p>
<!--
Note that `cargo fix` may still not be able to automatically update our code.
If `cargo fix` can't fix something, it will print a warning to the console, and
you'll have to fix it manually.
-->
<p>なお、<code>cargo fix</code>はコードを自動的に改修することができない場合もあることを覚えておいてください。
その場合は <code>cargo fix</code>は警告メッセージを出すので、それを見て手動でコードを修正してください。</p>
<!--
As mentioned before, there are known bugs around the idiom lints which
means they're not all ready for prime time yet. You may get a scary-looking
warning to report a bug to Cargo, which happens whenever a fix proposed by
`rustc` actually caused code to stop compiling by accident. If you'd like `cargo
fix` to make as much progress as possible, even if it causes code to stop
compiling, you can execute:
-->
<p>上でも述べたようにイディオムチェッカーには幾つかわかっているバグがあり、まだ実践登用できるレベルではありません。
Cargoのバグレポートを出すようにという恐ろしげな警告を見るかも知れませんが、これは <code>rustc</code>によって提案された修正が誤ってコードをコンパイルできなくしてしまった時に起こります。
もしコンパイルが止まったとしても <code>cargo fix</code>を使ってできるだけ自動修正をしたい場合には以下のコマンドを使います。</p>
<pre><code class="language-console">$ cargo fix --edition-idioms --broken-code
</code></pre>
<!--
This will instruct `cargo fix` to apply automatic suggestions regardless of
whether they work or not. Like usual, you'll see the compilation result after
all fixes are applied. If you notice anything wrong or unusual, please feel free
to report an issue to Cargo and we'll help prioritize and fix it.
-->
<p>これは、動くかどうかは関係なく<code>cargo fix</code>に自動修正を行わせます。
全ての修正が適用された後にコードはコンパイルされてその結果を見ることができます。
もし何か間違いや異常に気がついた時は、お気軽にCargoにバグ報告してください。</p>
<!--
Enjoy the new edition!
-->
<p>それでは、新しいエディションをお楽しみください！</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../editions/creating-a-new-project.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../rust-2015/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../editions/creating-a-new-project.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../rust-2015/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
